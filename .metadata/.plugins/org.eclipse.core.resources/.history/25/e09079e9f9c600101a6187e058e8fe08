package ejerciciosfinalesbucles;



import java.io.BufferedReader;

import java.io.IOException;

import java.io.InputStreamReader;



public class ejercicio9 {



    public static void main(String[] args) throws NumberFormatException, IOException {

        BufferedReader lector = new BufferedReader(new InputStreamReader(System.in));

        boolean salir = false;



        while (!salir) {

            System.out.println("=== BIENVENIDO A CAFETERÍA JAVA ===");

            System.out.println();

            System.out.println("--- MENÚ PRINCIPAL ---");

            System.out.println("1. Crear pedido personalizado");

            System.out.println("2. Preparar cola de pedidos");

            System.out.println("3. Control de inventario de granos");

            System.out.println("4. Generador de nombre para café especial");

            System.out.println("5. Salir");

            System.out.print("Elige una opción: ");

            int opcion = Integer.parseInt(lector.readLine());

            System.out.println();



            switch (opcion) {



            case 1:

                System.out.println("=== CREAR PEDIDO PERSONALIZADO ===");

                System.out.print("Introduce el nombre del cliente: ");

                String nombre = lector.readLine();

                System.out.print("Introduce el tipo de café (expresso/cappuccino/latte): ");

                String tipoCafe = lector.readLine().toLowerCase();

                System.out.print("Introduce el tamaño (pequeño/mediano/grande): ");

                String tamano = lector.readLine().toLowerCase();

                System.out.print("¿Quieres extra de leche? (S/N): ");

                char extraLeche = lector.readLine().toLowerCase().charAt(0);



                double precioBase = 0;

                String tamanoCodigo = "";



                switch (tamano) {

                case "pequeño":

                    precioBase = 2.0;

                    tamanoCodigo = "P";

                    break;

                case "mediano":

                    precioBase = 3.0;

                    tamanoCodigo = "M";

                    break;

                case "grande":

                    precioBase = 4.0;

                    tamanoCodigo = "G";

                    break;

                default:

                    System.out.println("Tamaño no válido. Se usará tamaño mediano.");

                    precioBase = 3.0;

                    tamanoCodigo = "M";

                }



                double extra = 0;

                if (extraLeche == 's') {

                    extra = 0.5;

                }



                double subtotal = precioBase + extra;

                double precioFinal = subtotal;

                boolean descuento = false;



                if (subtotal > 5) {

                    precioFinal = subtotal * 0.85;

                    descuento = true;

                }



                String codigo = nombre.substring(0, 2).toUpperCase() + tipoCafe + tamanoCodigo;



                System.out.println();

                System.out.println("--- PEDIDO CREADO ---");

                System.out.println("Código de pedido: " + codigo);

                System.out.println("Cliente: " + nombre);

                System.out.print("Tipo: " + tipoCafe + " " + tamano);

                if (extraLeche == 's') {

                    System.out.print(" con extra de leche");

                }

                System.out.println();

                System.out.println("Precio base: " + precioBase + "€");

                System.out.println("Extra de leche: " + extra + "€");

                System.out.println("Subtotal: " + subtotal + "€");



                if (descuento) {

                    System.out.printf("Precio final: %.2f€ (con 15%% de descuento)\n", precioFinal);

                } else {

                    System.out.printf("Precio final: %.2f€ (sin descuento - no supera 5€)\n", precioFinal);

                }

                System.out.println();

                break;



            case 2:

                System.out.println("=== PREPARAR COLA DE PEDIDOS ===");

                System.out.print("¿Cuántos pedidos hay en cola?: ");

                int numPedidos = Integer.parseInt(lector.readLine());

                int completados = 0;

                int cancelados = 0;

                int tiempoTotal = 0;



                for (int i = 1; i <= numPedidos; i++) {

                    System.out.print("Pedido " + i + " - Tiempo de preparación en minutos (1-10): ");

                    int tiempo = Integer.parseInt(lector.readLine());



                    if (tiempo == 0) {

                        System.out.println("Pedido cancelado");

                        cancelados++;

                    } else {

                        completados++;

                        tiempoTotal += tiempo;

                    }

                }



                System.out.println();

                System.out.println("--- RESUMEN DE PEDIDOS ---");

                System.out.println("Pedidos completados: " + completados);

                System.out.println("Pedidos cancelados: " + cancelados);

                System.out.println("Tiempo total de espera: " + tiempoTotal + " minutos");



                if (completados > 0) {

                    double tiempoMedio = (double) tiempoTotal / completados;



                    // Convertir tiempo medio a horas y minutos

                    int horas = (int) tiempoMedio / 60;

                    int minutos = (int) (tiempoMedio % 60);

                    int segundos = (int) Math.round((tiempoMedio - ((int) tiempoMedio)) * 60);

                    System.out.println("Tiempo medio por pedido: " + tiempoMedio + " minutos");

                    System.out.println("Equivalente a: " + horas + " horas, " + minutos + " minutos y " + segundos + " segundos");

                } else {

                    System.out.println("No hay pedidos completados para calcular el tiempo medio.");

                }

                System.out.println();

            break;

            case 3:

                System.out.println("=== CONTROL DE INVENTARIO DE GRANOS ===");

                System.out.print("Introduce los kg de café disponibles: ");

                double kgDisponibles = Double.parseDouble(lector.readLine());

                System.out.print("Introduce cuántos cafés se han vendido hoy: ");

                int cafesVendidos = Integer.parseInt(lector.readLine());



                double gramosDisponibles = kgDisponibles * 1000;

                double gramosNecesarios = cafesVendidos * 15;



                System.out.println();

                System.out.println("--- ANÁLISIS DE INVENTARIO ---");

                System.out.println("Café disponible: " + kgDisponibles + " kg (" + gramosDisponibles + " g)");

                System.out.println("Café necesario para " + cafesVendidos + " cafés: " + gramosNecesarios + " g");



                if (gramosDisponibles < gramosNecesarios) {

                    double faltan = (gramosNecesarios - gramosDisponibles) / 1000;

                    System.out.println("No hay suficiente café.");

                    System.out.println("Faltan: " + faltan + " kg para cubrir todas las ventas.");

                } else {

                    double sobra = gramosDisponibles - gramosNecesarios;

                    int cafesExtra = (int) (sobra / 15);

                    System.out.println("Hay suficiente café.");

                    System.out.println("Sobra para " + cafesExtra + " cafés más (" + (sobra / 1000) + " kg).");

                }

                System.out.println();

                break;



            case 4:

                System.out.println("=== GENERADOR DE NOMBRE PARA CAFÉ ESPECIAL ===");

                char otra = 's';



                while (otra == 's') {

                    int origen = (int) (Math.random() * 4) + 1;

                    int caracteristica = (int) (Math.random() * 4) + 1;

                    String nombreCafe = "";

                    String tipoCafeEsp = "";



                    switch (origen) {

                    case 1:

                        nombreCafe = "Colombiano";

                        break;

                    case 2:

                        nombreCafe = "Etíope";

                        break;

                    case 3:

                        nombreCafe = "Brasileño";

                        break;

                    case 4:

                        nombreCafe = "Italiano";

                        break;

                    }



                    switch (caracteristica) {

                    case 1:

                        tipoCafeEsp = "Intenso";

                        break;

                    case 2:

                        tipoCafeEsp = "Suave";

                        break;

                    case 3:

                        tipoCafeEsp = "Aromático";

                        break;

                    case 4:

                        tipoCafeEsp = "Premium";

                        break;

                    }



                    double precio = 3 + (Math.random() * 5);

                    System.out.println("Café especial: " + nombreCafe + " " + tipoCafeEsp);

                    System.out.printf("Precio sugerido: %.2f€\n", precio);

                    System.out.print("¿Quieres generar otro? (S/N): ");

                    otra = lector.readLine().toLowerCase().charAt(0);

                }

                System.out.println();

                break;



            case 5:

                System.out.println("¡Gracias por visitarnos! ¡Que disfrutes tu café!");

                salir = true;

                break;



            default:

                System.out.println("Número inválido. Inténtalo de nuevo.");

                System.out.println();

            }

        }

    }

}